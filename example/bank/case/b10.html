

<form name="bussigndetailform" action="" id="from343242459" method="post" class="form form-horizontal ">
    <div class="container-fluid">
        <div class="row show-grid">
            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab">
                        <h4 class="panel-title">
                            银行收费参数设置
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div class="form-group tbsp-form-item col-xs-12 col-md-6" style="">
                            <label class="col-xs-12 col-md-4 control-label pl-0 pr-5" style="">收取方式：</label>
                            <div class="col-xs-12 col-md-8 pl-0 " style=""><select name="addType" value="0"
                                                                                   class="form-control select2" id="sid790973876"
                                                                                   disabled="" "="" tabindex="-1" style="display:
                                none;">
                                <option value="0">向商户收取</option>
                                <option value="1">向会员收取</option>
                                </select><span
                                        class="select2 select2-container select2-container--default select2-container--disabled"
                                        dir="ltr" style="width: 100px;"><span class="selection"><span
                                        class="select2-selection select2-selection--single" role="combobox"
                                        aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="-1"
                                        aria-labelledby="select2-sid790973876-container"><span class="select2-selection__rendered"
                                                                                               id="select2-sid790973876-container"
                                                                                               title="向商户收取">向商户收取</span><span
                                        class="select2-selection__arrow" role="presentation"><b
                                        role="presentation"></b></span></span></span><span class="dropdown-wrapper"
                                                                                           aria-hidden="true"></span></span>
                                <script type="text/javascript">

                                    $(function () {
                                        $("#sid790973876").each(function () {
                                            var that = this;
                                            var placeholder = $(that).attr("placeholder") ? $(this).attr("placeholder") : "";
                                            $(this).select2({
                                                allowClear: true,
                                                placeholder: placeholder

                                            });
                                        });
                                        var valuestr = "0";
                                        var values = valuestr.split(",");
                                        if (values.length > 1) {
                                            $("#sid790973876").val(values).trigger("change");
                                        } else {
                                            $("#sid790973876").val(valuestr).trigger("change");
                                        }
                                        $.extend($.fn.select2.defaults.defaults.language, {
                                            noResults: function () {
                                                return '无数据';
                                            }
                                        });
                                    });
                                </script>
                            </div>
                            <div class="col-xs-12 col-md-0 valid-msg"></div>
                        </div>

                        <div class="form-group tbsp-form-item col-xs-12 col-md-6" style="">
                            <label class="col-xs-12 col-md-4 control-label pl-0 pr-5" style="">收费周期：</label>
                            <div class="col-xs-12 col-md-8 pl-0 " style=""><select name="addType" value="2"
                                                                                   class="form-control select2" id="sid880488021"
                                                                                   disabled="" "="" tabindex="-1" style="display:
                                none;">
                                <option value="2">按季</option>
                                <option value="1">按月</option>
                                <option value="0">按天</option>
                                </select><span
                                        class="select2 select2-container select2-container--default select2-container--disabled"
                                        dir="ltr" style="width: 100px;"><span class="selection"><span
                                        class="select2-selection select2-selection--single" role="combobox"
                                        aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="-1"
                                        aria-labelledby="select2-sid880488021-container"><span class="select2-selection__rendered"
                                                                                               id="select2-sid880488021-container"
                                                                                               title="按季">按季</span><span
                                        class="select2-selection__arrow" role="presentation"><b
                                        role="presentation"></b></span></span></span><span class="dropdown-wrapper"
                                                                                           aria-hidden="true"></span></span>
                                <script type="text/javascript">

                                    $(function () {
                                        $("#sid880488021").each(function () {
                                            var that = this;
                                            var placeholder = $(that).attr("placeholder") ? $(this).attr("placeholder") : "";
                                            $(this).select2({
                                                allowClear: true,
                                                placeholder: placeholder

                                            });
                                        });
                                        var valuestr = "2";
                                        var values = valuestr.split(",");
                                        if (values.length > 1) {
                                            $("#sid880488021").val(values).trigger("change");
                                        } else {
                                            $("#sid880488021").val(valuestr).trigger("change");
                                        }
                                        $.extend($.fn.select2.defaults.defaults.language, {
                                            noResults: function () {
                                                return '无数据';
                                            }
                                        });
                                    });
                                </script>
                            </div>
                            <div class="col-xs-12 col-md-0 valid-msg"></div>
                        </div>
                        <div class="form-group tbsp-form-item col-xs-12 col-md-6" style="">
                            <label class="col-xs-12 col-md-4 control-label pl-0 pr-5" style="">收费日期：</label>
                            <div class="col-xs-12 col-md-8 pl-0 " style=""><input type="text" name="chargeCycleDays" value="1"
                                                                                  class="form-control input-text" readonly="true"
                                                                                  data-value="1">
                            </div>
                            <div class="col-xs-12 col-md-0 valid-msg"></div>
                        </div>
                        <div class="form-group tbsp-form-item col-xs-12 col-md-6" style="">
                            <label class="col-xs-12 col-md-4 control-label pl-0 pr-5" style="">支出账号：</label>
                            <div class="col-xs-12 col-md-8 pl-0 " style=""><input type="text" name="spendingAcc" value="000001"
                                                                                  class="form-control input-text" readonly="true"
                                                                                  data-value="000001">
                            </div>
                            <div class="col-xs-12 col-md-0 valid-msg"></div>
                        </div>

                        <div class="form-group tbsp-form-item col-xs-12 col-md-6" style="">
                            <label class="col-xs-12 col-md-4 control-label pl-0 pr-5" style="">支出户名：</label>
                            <div class="col-xs-12 col-md-8 pl-0 " style=""><input type="text" name="spendingName" value="某支出行1"
                                                                                  class="form-control input-text" readonly="true"
                                                                                  data-value="某支出行1">
                            </div>
                            <div class="col-xs-12 col-md-0 valid-msg"></div>
                        </div>
                        <div class="col-xs-12 col-md-12">

                            <div class="bootstrap-table" s-type="form-table">
                                <div class="fixed-table-toolbar"></div>
                                <div class="fixed-table-container" style="padding-bottom: 0px;">
                                    <div class="fixed-table-header" style="display: none;">
                                        <table></table>
                                    </div>
                                    <div class="fixed-table-body">
                                        <div class="fixed-table-loading" style="top: 1px;">正在努力地加载数据中，请稍候……</div>
                                        <table id="chargeformId" width="100%" class="table table-hover">
                                            <thead style="">
                                            <tr>
                                                <th style="" data-field="idx" tabindex="0">
                                                    <div class="th-inner ">序号</div>
                                                    <div class="fht-cell"></div>
                                                </th>
                                                <th style="" data-field="startNum" tabindex="0">
                                                    <div class="th-inner ">起始金额(&gt;)</div>
                                                    <div class="fht-cell"></div>
                                                </th>
                                                <th style="" data-field="endNum" tabindex="0">
                                                    <div class="th-inner ">截至金额(&lt;=)</div>
                                                    <div class="fht-cell"></div>
                                                </th>
                                                <th style="" data-field="modeName" tabindex="0">
                                                    <div class="th-inner ">计费方式</div>
                                                    <div class="fht-cell"></div>
                                                </th>
                                                <th style="" data-field="feeAmt" tabindex="0">
                                                    <div class="th-inner ">计费内容</div>
                                                    <div class="fht-cell"></div>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr data-index="0">
                                                <td style="">0</td>
                                                <td style="">0.00</td>
                                                <td style="">100.00</td>
                                                <td style="">按金额</td>
                                                <td style=""><a title="计费内容（点击可编辑）" modal-title="计费内容（按金额）" data-toggle="modal"
                                                                data-height="200" data-width="500" data-v0="1.00">1.00</a></td>
                                            </tr>
                                            <tr data-index="1">
                                                <td style="">1</td>
                                                <td style="">100.00</td>
                                                <td style="">1000.00</td>
                                                <td style="">按比例</td>
                                                <td style=""><a title="计费内容（点击可编辑）" modal-title="计费内容（按比例）" data-toggle="modal"
                                                                data-height="200" data-width="500" data-v1="0.01" data-v2="1.00"
                                                                data-v3="9.00">收费比例=1%，最低限额=1.00，最高限额=9.00</a></td>
                                            </tr>
                                            <tr data-index="2">
                                                <td style="">2</td>
                                                <td style="">1000.00</td>
                                                <td style="">2000.00</td>
                                                <td style="">按金额</td>
                                                <td style=""><a title="计费内容（点击可编辑）" modal-title="计费内容（按金额）" data-toggle="modal"
                                                                data-height="200" data-width="500" data-v0="2.00">2.00</a></td>
                                            </tr>
                                            <tr data-index="3">
                                                <td style="">3</td>
                                                <td style="">2000.00</td>
                                                <td style="">无限大</td>
                                                <td style="">按金额</td>
                                                <td style=""><a title="计费内容（点击可编辑）" modal-title="计费内容（按金额）" data-toggle="modal"
                                                                data-height="200" data-width="500" data-v0="10.00">10.00</a></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="fixed-table-footer" style="display: none;">
                                        <table>
                                            <tbody>
                                            <tr></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="fixed-table-pagination" style="display: none;"></div>
                                </div>
                            </div>
                            <div class="clearfix"></div>

                            <div id="calcByRatio" class="modal hide fade" role="dialog" aria-hidden="true">
                                <div class="modal-header">
                                    <span class="modal-expand" data-expand="modal"><i class="fa fa-expand"></i></span>
                                    <span class="modal-close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></span>
                                    <h3>对话框标题</h3>
                                </div>
                                <div class="modal-body thin-scroll">
                                    <div class="clear">
                                        <div class="table">
                                            <div class="show-grid1 col-xs-6 col-md-4" style="">
                                                收费比例（%）
                                            </div>
                                            <div class="show-grid1 col-xs-6 col-md-4" style="">
                                                最低限额（元）
                                            </div>
                                            <div class="show-grid1 col-xs-6 col-md-4" style="">
                                                最高限额（元）
                                            </div>
                                            <div class="show-grid3 col-xs-6 col-md-4" style="">
                                                <input type="text" name="feeRatio" class="mText" data-value="">
                                            </div>
                                            <div class="show-grid3 col-xs-6 col-md-4" style="">
                                                <input type="text" name="minMon" class="mText" data-value="">
                                            </div>
                                            <div class="show-grid3 col-xs-6 col-md-4" style="">
                                                <input type="text" name="maxMon" class="mText" data-value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                                <div class="modal-footer ">
                                    <button class="btn radius btn-primary" data-submit="modal">确定</button>
                                    <button class="btn radius" data-dismiss="modal" aria-hidden="true">关闭</button>
                                </div>
                            </div>
                            <script type="text/javascript">
                                $(function () {
                                    $("#calcByRatio").on("close", function (e) {
                                        $(this).modal('hide');
                                    });
                                    $("#calcByRatio").off("click.submit").on("click.submit", "[data-submit=modal]", function () {
                                        $(this).closest(".modal").find("form:first").submit();
                                    })
                                });
                            </script>
                            <div id="calcByMon" class="modal hide fade" role="dialog" aria-hidden="true">
                                <div class="modal-header">
                                    <span class="modal-expand" data-expand="modal"><i class="fa fa-expand"></i></span>
                                    <span class="modal-close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></span>
                                    <h3>对话框标题</h3>
                                </div>
                                <div class="modal-body thin-scroll">
                                    <div class="clear">
                                        <div class="search-boxitems col-md-12" style="">
                                            <label class="col-md-2 pl-0 pr-0">收费金额（元）：</label>
                                            <div class="col-md-6"><input type="text" name="fee" value=""
                                                                         class="form-control input-sm w-percent" size="10"
                                                                         data-value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                                <div class="modal-footer ">
                                    <button class="btn radius btn-primary" data-submit="modal">确定</button>
                                    <button class="btn radius" data-dismiss="modal" aria-hidden="true">关闭</button>
                                </div>
                            </div>
                            <script type="text/javascript">
                                $(function () {
                                    $("#calcByMon").on("close", function (e) {
                                        $(this).modal('hide');
                                    });
                                    $("#calcByMon").off("click.submit").on("click.submit", "[data-submit=modal]", function () {
                                        $(this).closest(".modal").find("form:first").submit();
                                    })
                                });
                            </script>

                            <script>

                                var MODE_01 = "00", MODE_02 = "01";//00 按金额，01 按比例

                                $(function () {
                                    $("button[name='tinySearch']").hide();
                                    $("#chargeformId-table").off("load-success.bs.table").on("load-success.bs.table", function (data) {
                                        checkSortNo();
                                    });

                                });

                                function inputFormatter(value, row) {
                                    value = (typeof value == "undefined") ? "" : value;
                                    if ((value !== "" && Number(value) == 0) || value == "无限大") {
                                        return '<input class="v1" type="text" disabled="disabled" value="' + value + '" placeholder="请输入"/>';
                                    } else {
                                        return '<input class="v1" type="text" value="' + value + '" placeholder="请输入"/>';
                                    }
                                }

                                function modeFormatter(value, row) {
                                    var result = '<select>'
                                        + '<option value="00">按金额</option>'
                                        + ((row && row.mode == MODE_02) ? '<option value="01" selected="selected">按比例</option>' : '<option value="01" >按比例</option>')
                                        + '</select>';
                                    return result;
                                }

                                function ctnFormatter(value, row) {
                                    var fmt;
                                    if (row && row.mode != MODE_01) {
                                        fmt = '<a title="计费内容（点击可编辑）" modal-title="计费内容（按比例）" '
                                            + ' data-target="#calcByRatio" data-toggle="modal"'
                                            + ' data-height="200" data-width="500"'
                                            + ' data-v1="' + row.pouRatio + '" data-v2="' + row.lowLimitAmt + '" data-v3="' + row.highLimtAmt + '"'
                                            + ' href="#">'
                                            + ("收费比例=" + row.pouRatio * 100 + "%，最低限额=" + row.lowLimitAmt + "，最高限额=" + row.highLimtAmt)
                                            + '</a>';
                                    } else {
                                        fmt = '<a title="计费内容（点击可编辑）" modal-title="计费内容（按金额）" '
                                            + ' data-target="#calcByMon" data-toggle="modal"'
                                            + ' data-height="200" data-width="500"'
                                            + ' data-v0="' + (row ? row.feeAmt : '-') + '"'
                                            + ' href="#">'
                                            + (row ? row.feeAmt : '-')
                                            + '</a>';
                                    }

                                    return fmt;
                                }

                                function operate(value, row) {
                                    return createOperate4Tr();
                                }

                                function createOperate4Tr() {
                                    return '<a data-opera-type="add" href="javascript:void(0)">增加</a>&nbsp;&nbsp;'
                                        + '<a data-opera-type="remove" href="javascript:void(0)">删除</a>';
                                }

                                function checkSortNo() {
                                    var trs = $("#chargeformId-table tbody tr");
                                    if (trs.length == 1 && trs.is(".no-records-found"))return;
                                    for (var i = 0; i < trs.length; i++) {
                                        $(trs[i]).attr("data-index", i + 1);
                                        $(trs[i]).find("td:first").text(i + 1);
                                    }
                                }

                                function isTableEmpty() {
                                    var trs = $("#chargeformId-table tbody tr");
                                    return (trs.length == 1 && trs.is(".no-records-found"));
                                }

                                function getInputData() {
                                    var $trs = $("#chargeformId-table tbody tr");
                                    var datas = [];
                                    for (var i = 0; i < $trs.length; i++) {
                                        var $tr = $trs.eq(i);
                                        var $tds = $tr.find("td");
                                        var record = {};
                                        record.no = $tds.eq(0).text();
                                        record.start = $tds.eq(1).find("input").val();
                                        record.end = $tds.eq(2).find("input").val();
                                        record.mode = $tds.eq(3).find("select").val();
                                        record.feeAmt = $tds.eq(4).find("a").attr("data-v0");
                                        record.pouRatio = $tds.eq(4).find("a").attr("data-v1");
                                        record.lowLimitAmt = $tds.eq(4).find("a").attr("data-v2");
                                        record.highLimtAmt = $tds.eq(4).find("a").attr("data-v3");
                                        datas.push(record);
                                    }
                                    return datas;
                                }

                                function checkData(arr) {
                                    var pre, cur;
                                    for (var i = 0; i < arr.length; i++) {
                                        cur = arr[i];
                                        if (i == 0 && (cur.start !== "0" && cur.start !== "0.00")) {
                                            layer.msg("第一行起始金额必须为0", {icon: 0});
                                            return false;
                                        }
                                        if (!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.start)) {
                                            layer.msg("第" + (i + 1) + "行起始金额请输入数字", {icon: 0});
                                            return false;
                                        }
                                        if (i < arr.length - 1 && !/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.end)) {
                                            layer.msg("第" + (i + 1) + "行截止金额请输入数字", {icon: 0});
                                            return false;
                                        }
                                        if (pre && Number(pre.end) < Number(cur.start)) {
                                            layer.msg("请配置" + pre.end + "到" + cur.start + "的计费规则", {icon: 0});
                                            return false;
                                        } else if (pre && Number(pre.end) > Number(cur.start)) {
                                            layer.msg("第" + (i + 1) + "行起始金额不能小于第" + (i) + "行截止金额", {icon: 0});
                                            return false;
                                        }
                                        if (i == arr.length - 1 && cur.end !== "无限大") {
                                            layer.msg("最末行的截止金额必须为‘无限大’", {icon: 0});
                                            return false;
                                        }

                                        if (cur.mode == MODE_01) {
                                            if (!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.feeAmt)) {
//	    			layer.msg("请重新设置第"+(i+1)+"行计费内容",{icon:0});
                                                layer.msg("第" + (i + 1) + "行金额不能为空", {icon: 0});
                                                return false;
                                            }
                                        } else if (cur.mode == MODE_02) {
                                            if (!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.pouRatio) || !/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.lowLimitAmt) || !/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(cur.highLimtAmt)) {
//	    			layer.msg("请重新设置第"+(i+1)+"行计费内容",{icon:0});
                                                layer.msg("第" + (i + 1) + "行比例不能为空", {icon: 0});
                                                return false;
                                            }
                                        } else {
                                            layer.msg("请选择第" + (i + 1) + "行计费方式", {icon: 0});
                                        }
                                        pre = cur;
                                    }
                                    return true;
                                }

                                function createTr() {
                                    var tr = '<tr data-index="1">'
                                        + '<td></td>'
                                        + '<td>' + inputFormatter() + '</td>'
                                        + '<td>' + inputFormatter() + '</td>'
                                        + '<td>' + modeFormatter() + '</td>'
                                        + '<td>' + ctnFormatter() + '</td>'
                                        + '<td>' + createOperate4Tr() + '</td></tr>'
                                    return tr;
                                }

                                $("#chargeformId-table").off("change").on("change", function (event) {
                                    var $tg = $(event.target);
                                    var $cntTd = $tg.parent().next();
                                    var mode = $tg.val();


                                    var $a = $cntTd.find("a");
                                    if (mode == MODE_01) {
                                        $a.attr("modal-title", "计费内容（按金额）");
                                        $a.attr("data-target", "#calcByMon");
                                    } else if (mode == MODE_02) {
                                        $a.attr("modal-title", "计费内容（按比例）");
                                        $a.attr("data-target", "#calcByRatio");
                                    }
                                });

                                $("#addChargeRule").on("click", function () {
                                    if (isTableEmpty()) {
                                        $("#chargeformId-table tbody tr").remove();
                                    }
                                    var $trs = $("#chargeformId-table tbody tr");
                                    var $newTr = $(createTr());
                                    if ($trs.length == 0) {
                                        $newTr.find("input").eq(0).val("0").attr("disabled", "disabled");
                                    } else {
                                        var $preTr = $trs.eq($trs.length - 1);
                                        $preTr.find("input").eq(1).val("").removeAttr("disabled");
                                    }
                                    $newTr.find("input").eq(1).val("无限大").attr("disabled", "disabled");
                                    $("#chargeformId-table tbody").append($newTr);
                                    checkSortNo();
                                });

                                var $editedElem = "";
                                $("#chargeformId-table").off("click").on("click", function (event) {
                                    var $tg = $(event.target);
                                    var opertype = $tg.attr("data-opera-type");
                                    var dTarget = $tg.attr("data-target");

                                    var $curTr = $tg.closest("tr");
                                    var isFirst = ($curTr.index() == 0);
                                    var $trs = $("#chargeformId-table tbody tr");
                                    var isLast = ($curTr.index() == ($trs.length - 1));

                                    if (opertype == "add") {
                                        var $newTr = $(createTr());
                                        if (isLast) {
                                            $newTr.find("input").eq(1).val("无限大").attr("disabled", "disabled");
                                            $curTr.find("input").eq(1).val("").removeAttr("disabled");
                                        }
                                        $newTr.insertAfter($curTr);
                                        checkSortNo();
                                    } else if (opertype == "remove") {
                                        if ($trs.length == 1) {
                                            layer.msg("至少有一条记录");
                                            return;
                                        } else if (isFirst) {
                                            var $nextTr = $curTr.next();
                                            $nextTr.find("input").eq(0).val("0").attr("disabled", "disabled");
                                        } else if (isLast) {
                                            var $prevTr = $curTr.prev();
                                            $prevTr.find("input").eq(1).val("无限大").attr("disabled", "disabled");
                                        }
                                        $curTr.remove();
                                        checkSortNo();
                                    } else if (dTarget == "#calcByMon") {//计费内容弹出框回显
                                        $editedElem = $tg.parent();
                                        var v0 = $tg.attr("data-v0");
                                        if (v0 == "-") {
                                            $("#calcByMon").find("input[name='fee']").val("");
                                        } else {
                                            $("#calcByMon").find("input[name='fee']").val(v0);
                                        }
                                    } else if (dTarget == "#calcByRatio") {//计费内容弹出框回显
                                        $editedElem = $tg.parent();
                                        var v1 = $tg.attr("data-v1");
                                        var v2 = $tg.attr("data-v2");
                                        var v3 = $tg.attr("data-v3");
                                        if (typeof(v1) == "undefined") {
                                            var feeRatio = $("#calcByRatio").find("input[name='feeRatio']").val("");
                                        } else {
                                            var feeRatio = $("#calcByRatio").find("input[name='feeRatio']").val(v1 * 100);
                                        }
                                        var minMon = $("#calcByRatio").find("input[name='minMon']").val(v2);
                                        var maxMon = $("#calcByRatio").find("input[name='maxMon']").val(v3);
                                    }

                                });


                                $("#calcByMon").off("click").on("click", "[data-submit=modal]", function () {
                                    var $modal = $(this).closest(".modal");
                                    var fee = $modal.find("input[name='fee']").val();
                                    if (fee == "" || !(Number(fee) >= 0)) {
//    	    layer.msg("请输入正确的费用值",{icon:0});
                                        layer.msg("费用值只能为数字", {icon: 0});
                                    } else {
                                        var htm = ctnFormatter(fee, {"mode": MODE_01, "feeAmt": fee});
                                        $editedElem.html(htm);
                                        $modal.modal('hide');
                                    }
                                });
                                $("#calcByRatio").off("click").on("click", "[data-submit=modal]", function () {
                                    var $modal = $(this).closest(".modal");
                                    var feeRatio = $modal.find("input[name='feeRatio']").val();
                                    var minMon = $modal.find("input[name='minMon']").val();
                                    var maxMon = $modal.find("input[name='maxMon']").val();
                                    //TODO:check
                                    if (!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(minMon)) {
                                        layer.msg("最低限额必须为数字", {icon: 0});
                                        return false;
                                    }
                                    if (!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(maxMon)) {
                                        layer.msg("最高限额必须为数字", {icon: 0});
                                        return false;
                                    }
                                    if (Number(maxMon) >= 100000) {
                                        layer.msg("最高限额不能大于99999.99", {icon: 0});
                                        return false;
                                    }
                                    if (Number(feeRatio) >= 0 && Number(feeRatio) <= 100) {
                                        var htm = ctnFormatter(feeRatio, {
                                            "mode": MODE_02,
                                            "pouRatio": feeRatio / 100,
                                            "lowLimitAmt": minMon,
                                            "highLimtAmt": maxMon
                                        });
                                        $editedElem.html(htm);
                                        $modal.modal('hide');
                                    } else {
                                        layer.msg("收费比例必须设置于0%到100%之间", {icon: 0});

                                    }

                                });


                            </script>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

</form>